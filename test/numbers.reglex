#include <stdio.h>

%%

emit_main

%%

DIGIT [0-9]
DIGITS {DIGIT}+
POINTGROUP {DIGIT}\.|\.{DIGIT}
INTEGER {DIGITS}
REAL {DIGITS}?{POINTGROUP}{DIGITS}?
WHITESPACE [\n\r\t\s]+

%%

{INTEGER} %{
  printf(
    "Integer (%d:%d): '%s'\n",
    reglex_ln(),
    reglex_col(),
    reglex_lexem()
  );
%}

{REAL} %{
  printf(
    "Real (%d:%d): '%s'\n",
    reglex_ln(),
    reglex_col(),
    reglex_lexem()
  );
%}

{WHITESPACE} %{ %}

. %{
  fprintf(
    stderr,
    "Illegal character encountered (%d:%d): '%s'",
    reglex_ln(),
    reglex_col(),
    reglex_lexem()
  ); 
  exit(1);
%}

%%

