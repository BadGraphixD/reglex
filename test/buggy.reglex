#include <stdio.h>

void print_lexem();

%%

emit_main

%%

%%

%{ html %}

script %{ reglex_switch_parser("js"); printf("Switching to js\n"); %}

[a-zA-Z_][a-zA-Z_]* %{ printf("name: '%s'\n", reglex_lexem()); %}
\(|\)|\[|\]|\{|\}|:|;|\.|,|\?|!|% %{ print_lexem(); %}
[\n\s] %{%}
. %{ fprintf(stderr, "Illegal character encountered in js: '%s'", reglex_lexem()); exit(1); %}

%{ js %}

script %{ reglex_switch_parser("js"); printf("Switching to js\n"); %}

[a-zA-Z_][a-zA-Z_]* %{ printf("name: '%s'\n", reglex_lexem()); %}
\(|\)|\[|\]|\{|\}|:|;|\.|,|\?|!|% %{ print_lexem(); %}
[\n\s] %{%}
. %{ fprintf(stderr, "Illegal character encountered in js: '%s'", reglex_lexem()); exit(1); %}

%%

void print_lexem() {
  printf("%s\n", reglex_lexem());
}
